/*! Copyright 2009-2017 Evernote Corporation. All rights reserved. */

function Options(){function a(a){return!!n[a]}function b(a){var b=n[a];for(var c in p)if(p.hasOwnProperty(c)){var d=p[c];if(d===b)return!0}return!1}function c(c){var d=p[c];return void 0!==d?d:a(c)?b(c)?"":n[c]:l[c]}function d(a,b){p[a]=b;var c=["simulateSimplifiedChinese","useStage","insecureProto","secureProto","overrideServiceURL"],d=!1;-1!=c.indexOf(a)&&(log.log("Will restart due to changing option "+a),d=!0,Browser.getCurrentTab(function(a){Browser.extension.getBackgroundPage().extension.msgHandlerLogout({restart:!0},{tab:a})})),g(d)}function e(a){"string"==typeof a&&(a=[a]);for(var b in a)delete p[a[b]];g()}function f(){var a=accountManager.currentId;return accountManager.currentSubpart===GlobalUtils.ACCOUNT_TYPE_BUSINESS&&(a+="_biz"),a}function g(a){for(var b={},c=Object.assign({},p),d=0;d<m.length;d++)p[m[d]]&&(b[m[d]]=p[m[d]],delete c[m[d]]);c.version=k,Persistent.set(o,c),accountManager.currentId&&(b.version=k,Persistent.setForUser(o,f(),b)),a&&(Persistent.clear("BootstrapInfoIndex"),Persistent.clear("BootstrapInfo"))}function h(a,b,c){if(p=Persistent.get(o)||{},(!p.version||p.version<k)&&(p={version:k}),c)try{c(null)}catch(a){log.warn("Couldn't send response to importOptions, but probably not important.")}}function i(){var a=f();if(a){var b=Persistent.getForUser(o,a)||{};(!b.version||b.version<k)&&(b={version:k}),p=Object.assign(p||{},b)}}function j(){h(),i()}var k=1,l={smartFilingTags:!0,alwaysTagWith:!1,alwaysTags:"",notebookSelection:"smartFiling",defaultAccount:"last",defaultClipAction:"lastUsed",afterClip:"postClipShowFull",insecureProto:"http://",secureProto:"https://",useSearchHelper:!0,enablePdfPageButton:!0,clipAction:"ARTICLE",useStage:!1,saveToEvernote:!0,simulateSimplifiedChinese:!1,overrideServiceURL:"",enableKeyboardShortcuts:!1,simulateClippingError:"none"},m=["notebookSelection","startNotebook","smartFilingTags","alwaysTagWith","alwaysTags"],n={startWebClipperShortcut:"192",closeWebClipperShortcut:"27",previewArticleShortcut:"65",previewFullPageShortcut:"70",previewUrlShortcut:"66",selectionModeShortcut:"83",takeScreenshotShortcut:"77",clearlyShortcut:"67",pdfShortcut:"80",emailShortcut:"69",expandArticleShortcut:"38",contractArticleShortcut:"40",moveArticleUpShortcut:"37",moveArticleDownShortcut:"39",toggleAccountShortcut:"191",selectNotebookShortcut:"78",addTagsShortcut:"84",saveShortcut:"13",minimizeClipperShortcut:"73",selectAllMarkupShortcut:"65|91",arrowShortcut:"18|65|91",textShortcut:"18|84|91",rectangleShortcut:"18|82|91",roundedRectangleShortcut:"18|85|91",ellipseShortcut:"18|79|91",lineShortcut:"18|76|91",markerShortcut:"18|77|91",highlighterShortcut:"18|73|91",stampShortcut:"18|80|91",pixelateShortcut:"18|88|91",cropShortcut:"18|75|91",zoomInShortcut:"187|91",zoomOutShortcut:"189|91",zoomToFitShortcut:"48|91",zoomToOriginalShortcut:"49|91",undoShortcut:"90|91",redoShortcut:"16|90|91"};versionDetect.getLastVersion()&&(l.enableKeyboardShortcuts=!0);var o="options",p={};h(),function(){var a=Persistent.get("charCodeCache");a||(a={187:61,189:45,192:96,191:47},Persistent.set("charCodeCache",a))}(),Persistent.set("EVERNOTE_VERSION",Browser.EVERNOTE_VERSION),this.get=c,this.set=d,this.clear=e,this.refresh=j,this.importUserOptions=i,Object.preventExtensions(this)}Object.preventExtensions(Options);var options;